<html lang="ru"><head>





<link href="../style/css.css" rel="stylesheet"></head>
<body>
<div id="container">

<div class="outercontainer">
<div class="innercontainer">
 
   <div class="item center menC">
     <h2>Scope-функции</h2>
	

	<div style="margin-top:23px;margin-left:5px;">
		
		
		<!-- Yandex.RTB R-A-201190-1 -->
		
	</div>

	<p><span class="b">Scope-функции</span> (можно перевести как "функции контекста" или "функции области видимости") позволяют 
выполнить для некоторого объекта некоторый код в виде лямбда-выражение. При вызове подобной функции, создается временная область видимости. 
В этой области видимости можно обращаться к объекту без использования его имени.</p>
<p>В Kotlin есть пять подобных функций: <span class="b">let</span>, <span class="b">run</span>, <span class="b">with</span>, <span class="b">apply</span> и <span class="b">also</span>. 
Эти функции похожи по своему действию и различаются прежде всего по параметрам и возвращаемым результатам</p>
<h3>let</h3>
<p>Лямбда-выражение в функции <span class="b">let</span> в качестве параметра <span class="b">it</span> получает объект, для которого вызывается функция. 
Возвращаемый результат функции let представляет результат данного лямбда-выражения.</p>
<div><div id="highlighter_980501" class="syntaxhighlighter  kt"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="kt keyword">inline</code> <code class="kt keyword">fun</code> <code class="kt plain">&lt;T, R&gt; T.let(block: (T) -&gt; R): R</code></div></div></td></tr></tbody></table></div></div>
<p>Распространенным сценарием, где применяется данная функция, представляет проверка на null:</p>
<div><div id="highlighter_490724" class="syntaxhighlighter  kt"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="kt keyword">fun</code> <code class="kt plain">main() {</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt keyword">val</code> <code class="kt plain">sam = Person(</code><code class="kt string">"Sam"</code><code class="kt plain">, </code><code class="kt string">"sam@gmail.com"</code><code class="kt plain">)</code></div><div class="line number4 index3 alt1"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">sam.email?.let{ println(</code><code class="kt string">"Email: $it"</code><code class="kt plain">) }&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="kt comments">// Email: sam@gmail.com</code></div><div class="line number5 index4 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt comments">// аналог без функции let</code></div><div class="line number6 index5 alt1"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt comments">//if(sam.email!=null) println("Email:${sam.email}")</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt keyword">val</code> <code class="kt plain">tom = Person(</code><code class="kt string">"Tom"</code><code class="kt plain">, </code><code class="kt keyword">null</code><code class="kt plain">)</code></div><div class="line number9 index8 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">tom.email?.let{ println(</code><code class="kt string">"Email: $it"</code><code class="kt plain">) } </code><code class="kt comments">// функция let не будет выполняться</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="kt plain">}</code></div><div class="line number12 index11 alt1"><code class="kt plain">data </code><code class="kt keyword">class</code> <code class="kt plain">Person(</code><code class="kt keyword">val</code> <code class="kt plain">name: String, </code><code class="kt keyword">val</code> <code class="kt plain">email: String?)</code></div></div></td></tr></tbody></table></div></div>
<p>Допустим, мы хотим вывести значение свойства Email объекта Person. Но это свойство может хранить значение <span class="b">null</span> (например, если электронный адрес у пользователя не установлен). 
С помощью выражения <code>sam.email?.</code> проверяем значение свойства <code>email</code> на <code>null</code>. Если email не равно null, то для строки в свойстве email вызывается 
функция <code>let</code>, которая создает временную область видимости и передает в нее значение свойства email через параметр <span class="b">it</span>. 
Если же свойство email равно null, то функция let не вызывается.</p>
<p>Если лямбда-выражение вызывает лишь одну функцию, в которую передается параметр it, то можно сократить вызов - указать после оператора <span class="b">::</span> название вызываемой функции:</p>
<div><div id="highlighter_94403" class="syntaxhighlighter  kt"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="kt keyword">fun</code> <code class="kt plain">main() {</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt keyword">val</code> <code class="kt plain">sam = Person(</code><code class="kt string">"Sam"</code><code class="kt plain">, </code><code class="kt string">"sam@gmail.com"</code><code class="kt plain">)</code></div><div class="line number4 index3 alt1"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">sam.email?.let(::println)&nbsp;&nbsp; </code><code class="kt comments">// sam@gmail.com</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt keyword">val</code> <code class="kt plain">tom = Person(</code><code class="kt string">"Tom"</code><code class="kt plain">, </code><code class="kt string">"tom@gmail.com"</code><code class="kt plain">)</code></div><div class="line number7 index6 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">tom.email?.let(::printEmail)&nbsp;&nbsp;&nbsp; </code><code class="kt comments">// Email: tom@gmail.com</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="kt plain">}</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="kt keyword">fun</code> <code class="kt plain">printEmail(email: String){</code></div><div class="line number12 index11 alt1"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">println(</code><code class="kt string">"Email: $email"</code><code class="kt plain">)</code></div><div class="line number13 index12 alt2"><code class="kt plain">}</code></div><div class="line number14 index13 alt1"><code class="kt plain">data </code><code class="kt keyword">class</code> <code class="kt plain">Person(</code><code class="kt keyword">val</code> <code class="kt plain">name: String, </code><code class="kt keyword">var</code> <code class="kt plain">email: String?)</code></div></div></td></tr></tbody></table></div></div>
<h3>with</h3>
<p>Лямбда-выражение в функции <span class="b">with</span> в качестве параметра <span class="b">this</span> получает объект, для которого вызывается функция. 
Возвращаемый результат функции with представляет результат данного лямбда-выражения.</p>
<div><div id="highlighter_354692" class="syntaxhighlighter  kt"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="kt keyword">inline</code> <code class="kt keyword">fun</code> <code class="kt plain">&lt;T, R&gt; with(receiver: T, block: T.() -&gt; R): R</code></div></div></td></tr></tbody></table></div></div>
<p>Функция <span class="b">with</span> принимает объект, для которого надо выполнить блок кода, в качестве параметра. Далее в самом блоке кода мы можем 
обращаться к общедоступным свойствам и методам объекта без его имени.</p>
<p>Обычно функция <span class="b">with()</span> применяется, когда надо выполнить над объектом набор операций как единое целое:</p>
<div><div id="highlighter_647898" class="syntaxhighlighter  kt"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="kt keyword">fun</code> <code class="kt plain">main() {</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt keyword">val</code> <code class="kt plain">tom = Person(</code><code class="kt string">"Tom"</code><code class="kt plain">, </code><code class="kt keyword">null</code><code class="kt plain">)</code></div><div class="line number4 index3 alt1"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt keyword">val</code> <code class="kt plain">emailOfTom = with(tom) {</code></div><div class="line number5 index4 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt keyword">if</code><code class="kt plain">(email==</code><code class="kt keyword">null</code><code class="kt plain">)</code></div><div class="line number6 index5 alt1"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">email = </code><code class="kt string">"${name.lowercase()}@gmail.com"</code></div><div class="line number7 index6 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">email</code></div><div class="line number8 index7 alt1"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">}</code></div><div class="line number9 index8 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">println(emailOfTom) </code><code class="kt comments">// tom@gmail.com</code></div><div class="line number10 index9 alt1"><code class="kt plain">}</code></div><div class="line number11 index10 alt2"><code class="kt plain">data </code><code class="kt keyword">class</code> <code class="kt plain">Person(</code><code class="kt keyword">val</code> <code class="kt plain">name: String, </code><code class="kt keyword">var</code> <code class="kt plain">email: String?)</code></div></div></td></tr></tbody></table></div></div>
<p>В данном случае функция with получает объект tom, поверяет его свойство email - если оно равно null, то устанавливает его на основе его имени. В качестве результата функции 
возвращается значение свойства email.</p>

<p>Часто <span class="b">with</span> применяется для установки свойств объектов. Например:</p>
<div><div id="highlighter_826680" class="syntaxhighlighter  kt"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="kt keyword">fun</code> <code class="kt plain">main() {</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt keyword">val</code> <code class="kt plain">tom = Person(</code><code class="kt string">"Tom"</code><code class="kt plain">, -19,</code><code class="kt keyword">null</code><code class="kt plain">)</code></div><div class="line number4 index3 alt1"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">with(tom) {</code></div><div class="line number5 index4 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt keyword">if</code><code class="kt plain">(email==</code><code class="kt keyword">null</code><code class="kt plain">) email = </code><code class="kt string">"${name.lowercase()}@gmail.com"</code></div><div class="line number6 index5 alt1"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt keyword">if</code><code class="kt plain">(age !</code><code class="kt keyword">in</code> <code class="kt plain">1..110) age = 18</code></div><div class="line number7 index6 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">}</code></div><div class="line number8 index7 alt1"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">println(</code><code class="kt string">"${tom.name} (${tom.age}) - ${tom.email}"</code><code class="kt plain">) </code><code class="kt comments">// Tom (18) - tom@gmail.com</code></div><div class="line number9 index8 alt2"><code class="kt plain">}</code></div><div class="line number10 index9 alt1"><code class="kt plain">data </code><code class="kt keyword">class</code> <code class="kt plain">Person(</code><code class="kt keyword">val</code> <code class="kt plain">name: String, </code><code class="kt keyword">var</code> <code class="kt plain">age:Int, </code><code class="kt keyword">var</code> <code class="kt plain">email: String?)</code></div></div></td></tr></tbody></table></div></div>
<p>В данном случае функция <span class="b">with</span> устанавливает свойства для объекта tom, если через конструктор им были переданы некорректные значения.</p>
<h3>run</h3>
<p>Лямбда-выражение в функции <span class="b">run</span> в качестве параметра <span class="b">this</span> получает объект, для которого вызывается функция. 
Возвращаемый результат функции run представляет результат данного лямбда-выражения.</p>
<div><div id="highlighter_686574" class="syntaxhighlighter  kt"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="kt keyword">inline</code> <code class="kt keyword">fun</code> <code class="kt plain">&lt;T, R&gt; T.run(block: T.() -&gt; R): R</code></div></div></td></tr></tbody></table></div></div>
<p>Функция <span class="b">run</span> похожа на функцию <span class="b">with</span> за тем исключением, что <span class="b">run</span> реализована как функция расширения. 
Функция <span class="b">run</span> также принимает объект, для которого надо выполнить блок кода, в качестве параметра. Далее в самом блоке кода мы можем 
обращаться к общедоступным свойствам и методам объекта без его имени.</p>
<div><div id="highlighter_946770" class="syntaxhighlighter  kt"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="kt keyword">fun</code> <code class="kt plain">main() {</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt keyword">val</code> <code class="kt plain">tom = Person(</code><code class="kt string">"Tom"</code><code class="kt plain">, </code><code class="kt keyword">null</code><code class="kt plain">)</code></div><div class="line number4 index3 alt1"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt keyword">val</code> <code class="kt plain">emailOfTom = tom.run {</code></div><div class="line number5 index4 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt keyword">if</code><code class="kt plain">(email==</code><code class="kt keyword">null</code><code class="kt plain">)</code></div><div class="line number6 index5 alt1"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">email = </code><code class="kt string">"${name.lowercase()}@gmail.com"</code></div><div class="line number7 index6 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">email</code></div><div class="line number8 index7 alt1"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">}</code></div><div class="line number9 index8 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">println(emailOfTom) </code><code class="kt comments">// tom@gmail.com</code></div><div class="line number10 index9 alt1"><code class="kt plain">}</code></div><div class="line number11 index10 alt2"><code class="kt plain">data </code><code class="kt keyword">class</code> <code class="kt plain">Person(</code><code class="kt keyword">val</code> <code class="kt plain">name: String, </code><code class="kt keyword">var</code> <code class="kt plain">email: String?)</code></div></div></td></tr></tbody></table></div></div>
<p>В данном случае функция <code>run</code> выполняет действия, аналогичные примеру с функцией <code>with</code>.</p>
<p>Реализация <code>run</code> как функции расширения упрощает проверку на null:</p>
<div><div id="highlighter_249197" class="syntaxhighlighter  kt"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="kt keyword">fun</code> <code class="kt plain">main() {</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt keyword">val</code> <code class="kt plain">tom = Person(</code><code class="kt string">"Tom"</code><code class="kt plain">, </code><code class="kt keyword">null</code><code class="kt plain">)</code></div><div class="line number4 index3 alt1"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt keyword">val</code> <code class="kt plain">validationResult = tom.email?.run {</code><code class="kt string">"valid"</code><code class="kt plain">} ?: </code><code class="kt string">"undefined"</code></div><div class="line number5 index4 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">println(validationResult) </code><code class="kt comments">// undefined</code></div><div class="line number6 index5 alt1"><code class="kt plain">}</code></div><div class="line number7 index6 alt2"><code class="kt plain">data </code><code class="kt keyword">class</code> <code class="kt plain">Person(</code><code class="kt keyword">val</code> <code class="kt plain">name: String, </code><code class="kt keyword">var</code> <code class="kt plain">email: String?)</code></div></div></td></tr></tbody></table></div></div>
<p>Также есть другая разновидность функции <span class="b">run()</span>, которая просто позволяет выполнить некоторое лямбда-выражение:</p>
<div><div id="highlighter_599286" class="syntaxhighlighter  kt"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="kt keyword">fun</code> <code class="kt plain">main() {</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt keyword">val</code> <code class="kt plain">randomText = run{ </code><code class="kt string">"hello world"</code><code class="kt plain">}</code></div><div class="line number4 index3 alt1"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">println(randomText)&nbsp; </code><code class="kt comments">// hello world</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">run{ println(</code><code class="kt string">"run function"</code><code class="kt plain">)}&nbsp;&nbsp;&nbsp; </code><code class="kt comments">// run function</code></div><div class="line number7 index6 alt2"><code class="kt plain">}</code></div></div></td></tr></tbody></table></div></div>
<h3>apply</h3>
<p>Лямбда-выражение в функции <span class="b">apply</span> в качестве параметра <span class="b">this</span> получает объект, для которого вызывается функция. 
Возвращаемым результатом функции фактически является передаваемый в функцию объект для которого выполняется функция.</p>
<div><div id="highlighter_907641" class="syntaxhighlighter  kt"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="kt keyword">inline</code> <code class="kt keyword">fun</code> <code class="kt plain">T.apply(block: T.() -&gt; Unit): T</code></div></div></td></tr></tbody></table></div></div>
<p>Например:</p>
<div><div id="highlighter_83681" class="syntaxhighlighter  kt"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="kt keyword">fun</code> <code class="kt plain">main() {</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt keyword">val</code> <code class="kt plain">tom = Person(</code><code class="kt string">"Tom"</code><code class="kt plain">, </code><code class="kt keyword">null</code><code class="kt plain">)</code></div><div class="line number4 index3 alt1"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">tom.apply {</code></div><div class="line number5 index4 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt keyword">if</code><code class="kt plain">(email==</code><code class="kt keyword">null</code><code class="kt plain">) email = </code><code class="kt string">"${name.lowercase()}@gmail.com"</code></div><div class="line number6 index5 alt1"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">}</code></div><div class="line number7 index6 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">println(tom.email) </code><code class="kt comments">// tom@gmail.com</code></div><div class="line number8 index7 alt1"><code class="kt plain">}</code></div><div class="line number9 index8 alt2"><code class="kt plain">data </code><code class="kt keyword">class</code> <code class="kt plain">Person(</code><code class="kt keyword">val</code> <code class="kt plain">name: String, </code><code class="kt keyword">var</code> <code class="kt plain">email: String?)</code></div></div></td></tr></tbody></table></div></div>
<p>В данном случае, как и в примерах с функциями <code>with</code> и <code>run</code>, проверяем значение свойства email, и если оно равно null, устанавливаем его, 
используя свойство name.</p>
<p>Распространенным сценарием применения функции <span class="b">apply()</span> является построение объекта в виде реализации вариации паттерна "Строитель":</p>
<div><div id="highlighter_929839" class="syntaxhighlighter  kt"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="kt keyword">fun</code> <code class="kt plain">main() {</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt keyword">val</code> <code class="kt plain">bob = Employee()</code></div><div class="line number4 index3 alt1"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">bob.name(</code><code class="kt string">"Bob"</code><code class="kt plain">)</code></div><div class="line number5 index4 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">bob.age(26)</code></div><div class="line number6 index5 alt1"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">bob.company(</code><code class="kt string">"JetBrains"</code><code class="kt plain">)</code></div><div class="line number7 index6 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">println(</code><code class="kt string">"${bob.name} (${bob.age}) - ${bob.company}"</code><code class="kt plain">) </code><code class="kt comments">// Bob (26) - JetBrains</code></div><div class="line number8 index7 alt1"><code class="kt plain">}</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="kt plain">data </code><code class="kt keyword">class</code> <code class="kt plain">Employee(</code><code class="kt keyword">var</code> <code class="kt plain">name: String = </code><code class="kt string">""</code><code class="kt plain">, </code><code class="kt keyword">var</code> <code class="kt plain">age: Int = 0, </code><code class="kt keyword">var</code> <code class="kt plain">company: String = </code><code class="kt string">""</code><code class="kt plain">) {</code></div><div class="line number11 index10 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt keyword">fun</code> <code class="kt plain">age(_age: Int): Employee = apply { age = _age }</code></div><div class="line number12 index11 alt1"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt keyword">fun</code> <code class="kt plain">name(_name: String): Employee = apply { name = _name }</code></div><div class="line number13 index12 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt keyword">fun</code> <code class="kt plain">company(_company: String): Employee = apply { company = _company }</code></div><div class="line number14 index13 alt1"><code class="kt plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>В данном случае класс Employee содержит три метода, которые устанавливают каждое из свойств класса. Причем каждый подобный метод вызывает 
функцию <span class="b">apply()</span>, которое передает значение соответствующему свойству и возвращает текущий объект Employee.</p>
<h3>also</h3>
<p>Лямбда-выражение в функции <span class="b">also</span> в качестве параметра <span class="b">it</span> получает объект, для которого вызывается функция. 
Возвращаемым результатом функции фактически является передаваемый в функцию объект для которого выполняется функция.</p>
<div><div id="highlighter_12700" class="syntaxhighlighter  kt"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="kt keyword">inline</code> <code class="kt keyword">fun</code> <code class="kt plain">T.also(block: (T) -&gt; Unit): T</code></div></div></td></tr></tbody></table></div></div>
<p>Эта функция аналогична функции <code>apply</code> за тем исключением, что внутри <code>also</code> объект, над которым выполняется блок кода, доступен 
через параметр <span class="b">it</span>:</p>
<div><div id="highlighter_86512" class="syntaxhighlighter  kt"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="kt keyword">fun</code> <code class="kt plain">main() {</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt keyword">val</code> <code class="kt plain">tom = Person(</code><code class="kt string">"Tom"</code><code class="kt plain">, </code><code class="kt keyword">null</code><code class="kt plain">)</code></div><div class="line number4 index3 alt1"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">tom.also {</code></div><div class="line number5 index4 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt keyword">if</code><code class="kt plain">(it.email==</code><code class="kt keyword">null</code><code class="kt plain">)</code></div><div class="line number6 index5 alt1"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">it.email = </code><code class="kt string">"${it.name.lowercase()}@gmail.com"</code></div><div class="line number7 index6 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">}</code></div><div class="line number8 index7 alt1"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">println(tom.email) </code><code class="kt comments">// tom@gmail.com</code></div><div class="line number9 index8 alt2"><code class="kt plain">}</code></div><div class="line number10 index9 alt1"><code class="kt plain">data </code><code class="kt keyword">class</code> <code class="kt plain">Person(</code><code class="kt keyword">val</code> <code class="kt plain">name: String, </code><code class="kt keyword">var</code> <code class="kt plain">email: String?)</code></div></div></td></tr></tbody></table></div></div>
	
	<div style="margin-top:25px;">

	
	</div>

	
	

	<div class="commentABl" style="clear:both;margin: 25px 5px 15px 5px;">
	
	
	
	</div>

	
	

  </div>

	
</div>

  
</div>


</div>














</body></html>