<html lang="ru"><head>





<link href="../style/css.css" rel="stylesheet"></head>
<body>
<div id="container">

<div class="outercontainer">
<div class="innercontainer">
 
   <div class="item center menC">
     <h2>Трансформации</h2>
	

	<div style="margin-top:23px;margin-left:5px;">
		
		
		<!-- Yandex.RTB R-A-201190-1 -->
		
	</div>

	<h3>map</h3>
<p>Для трансформации одной коллекции/последовательности применяется функция <span class="b">map()</span></p>
<div><div id="highlighter_52253" class="syntaxhighlighter  kt"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="kt plain">map(transform: (T) -&gt; R): List&lt;R&gt;/Sequence&lt;R&gt;</code></div></div></td></tr></tbody></table></div></div>
<p>В качестве параметра она принимает функцию пребразования. Функция пребразования получает текущий элемент коллекции/последовательности и 
возвращает результат преобразования. Причем типа входных и выходных данных могут совпадать, а могут и отличаться. Например:</p>
<div><div id="highlighter_610542" class="syntaxhighlighter  kt"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="kt keyword">fun</code> <code class="kt plain">main(){</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt keyword">val</code> <code class="kt plain">people = listOf(Person(</code><code class="kt string">"Tom"</code><code class="kt plain">), Person(</code><code class="kt string">"Sam"</code><code class="kt plain">), Person(</code><code class="kt string">"Bob"</code><code class="kt plain">))</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt keyword">val</code> <code class="kt plain">names = people.map { it.name } </code><code class="kt comments">// возвращаем имя каждого пользователя</code></div><div class="line number6 index5 alt1"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">println(names)&nbsp; </code><code class="kt comments">// [Tom, Sam, Bob]</code></div><div class="line number7 index6 alt2"><code class="kt plain">}</code></div><div class="line number8 index7 alt1"><code class="kt keyword">class</code> <code class="kt plain">Person(</code><code class="kt keyword">val</code> <code class="kt plain">name: String)</code></div></div></td></tr></tbody></table></div></div>
<p>Здесь из списка List&lt;Person&gt; получаем список List&lt;String&gt;, который содержит имена пользователей.</p>
<p>Другой пример - трансформируем последовательность чисел в последовательность квадратов этих чисел:</p>
<div><div id="highlighter_628280" class="syntaxhighlighter  kt"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="kt keyword">val</code> <code class="kt plain">numbers = listOf(1, 2, 3, 4, 5)</code></div><div class="line number2 index1 alt1"><code class="kt keyword">val</code> <code class="kt plain">squares = numbers.map { it * it }</code></div><div class="line number3 index2 alt2"><code class="kt plain">println(squares)&nbsp;&nbsp;&nbsp; </code><code class="kt comments">// [1, 4, 9, 16, 25]</code></div></div></td></tr></tbody></table></div></div>
<p>Еще одна функция -  <span class="b">mapIndexed()</span> также передает в функцию преобразования индекс текущего элемента:</p>
<div><div id="highlighter_68720" class="syntaxhighlighter  kt"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="kt plain">mapIndexed(transform: (index: Int, T) -&gt; R): List&lt;R&gt;</code></div></div></td></tr></tbody></table></div></div>
<p>Применение функции:</p>
<div><div id="highlighter_365231" class="syntaxhighlighter  kt"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="kt keyword">fun</code> <code class="kt plain">main(){</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt keyword">val</code> <code class="kt plain">people = listOf(Person(</code><code class="kt string">"Tom"</code><code class="kt plain">), Person(</code><code class="kt string">"Sam"</code><code class="kt plain">), Person(</code><code class="kt string">"Bob"</code><code class="kt plain">))</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt keyword">val</code> <code class="kt plain">names = people.mapIndexed{ index, p-&gt; </code><code class="kt string">"${index+1}.${p.name}"</code><code class="kt plain">}</code></div><div class="line number6 index5 alt1"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">println(names)&nbsp; </code><code class="kt comments">// [1.Tom, 2.Sam, 3.Bob]</code></div><div class="line number7 index6 alt2"><code class="kt plain">}</code></div><div class="line number8 index7 alt1"><code class="kt keyword">class</code> <code class="kt plain">Person(</code><code class="kt keyword">val</code> <code class="kt plain">name: String)</code></div></div></td></tr></tbody></table></div></div>
<p>Если необходимо отсеять значения null, которые могут возникать при преобразовании, то можно применять аналоги выше упомянутых функций - 
<span class="b">mapNotNull()</span> и <span class="b">mapIndexedNotNull()</span>:</p>
<div><div id="highlighter_906376" class="syntaxhighlighter  kt"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="kt keyword">fun</code> <code class="kt plain">main(){</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt keyword">val</code> <code class="kt plain">people = listOf(</code></div><div class="line number4 index3 alt1"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">Person(</code><code class="kt string">"Tom"</code><code class="kt plain">), Person(</code><code class="kt string">"Sam"</code><code class="kt plain">),</code></div><div class="line number5 index4 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">Person(</code><code class="kt string">"Bob"</code><code class="kt plain">), Person(</code><code class="kt string">"Alice"</code><code class="kt plain">)</code></div><div class="line number6 index5 alt1"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">)</code></div><div class="line number7 index6 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt comments">// элементы длиной имени не равной 3 преобразуем в null</code></div><div class="line number8 index7 alt1"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt keyword">val</code> <code class="kt plain">names1 = people.mapNotNull{ </code><code class="kt keyword">if</code><code class="kt plain">(it.name.length!=3) </code><code class="kt keyword">null</code> <code class="kt keyword">else</code> <code class="kt plain">it.name }</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt comments">// элементы на четных позициях преобразуем в null</code></div><div class="line number11 index10 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt keyword">val</code> <code class="kt plain">names2 = people.mapIndexedNotNull{ index, p -&gt; </code><code class="kt keyword">if</code><code class="kt plain">(index%2==0) </code><code class="kt keyword">null</code> <code class="kt keyword">else</code> <code class="kt plain">p.name }</code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">println(names1)&nbsp; </code><code class="kt comments">// [Tom, Sam, Bob]</code></div><div class="line number14 index13 alt1"><code class="kt spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="kt plain">println(names2)&nbsp; </code><code class="kt comments">// [Sam, Alice]</code></div><div class="line number15 index14 alt2"><code class="kt plain">}</code></div><div class="line number16 index15 alt1"><code class="kt keyword">class</code> <code class="kt plain">Person(</code><code class="kt keyword">val</code> <code class="kt plain">name: String)</code></div></div></td></tr></tbody></table></div></div>
<h3>flatten</h3>
<p>Функция <span class="b">flatten()</span> позволяет преобразовать коллекцию/последовательность, которая содержит вложенные коллекции/последовательности:</p>
<div><div id="highlighter_457613" class="syntaxhighlighter  kt"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="kt plain">flatten(): List&lt;T&gt;/Sequence&lt;T&gt;</code></div></div></td></tr></tbody></table></div></div>
<p>Эта функция помещает элементы всех вложенных коллекций в одну:</p>
<div><div id="highlighter_737373" class="syntaxhighlighter  kt"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="kt keyword">val</code> <code class="kt plain">personal = listOf(listOf(</code><code class="kt string">"Tom"</code><code class="kt plain">, </code><code class="kt string">"Bob"</code><code class="kt plain">), listOf(</code><code class="kt string">"Sam"</code><code class="kt plain">, </code><code class="kt string">"Mike"</code><code class="kt plain">, </code><code class="kt string">"Kate"</code><code class="kt plain">), listOf(</code><code class="kt string">"Tom"</code><code class="kt plain">, </code><code class="kt string">"Bill"</code><code class="kt plain">))</code></div><div class="line number2 index1 alt1"><code class="kt keyword">val</code> <code class="kt plain">people = personal.flatten()</code></div><div class="line number3 index2 alt2"><code class="kt plain">println(people)&nbsp;&nbsp;&nbsp; </code><code class="kt comments">// [Tom, Bob, Sam, Mike, Kate, Tom, Bill]</code></div></div></td></tr></tbody></table></div></div>

	
	<div style="margin-top:25px;">

	
	</div>

	
	

	<div class="commentABl" style="clear:both;margin: 25px 5px 15px 5px;">
	
	
	
	</div>

	
	

  </div>

	
</div>

  
</div>


</div>














<div class="pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links ad-text adSense adBlock adContent adBanner" style="width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;"></div></body></html>